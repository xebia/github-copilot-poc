# 05. Code completions lab - add a new endpoint

## Goal
Use Copilot code completions to implement a small feature in the API.

## Time
20–30 minutes

## Feature
Add a new endpoint to `PlanesController`:
- `GET /planes/search?year=1904` → returns planes matching the year

## Steps
1. Open `code/WrightBrothersApi/Controllers/PlanesController.cs`.
2. Create a new action method (start with a signature and let Copilot complete):
   - Route: `[HttpGet("search")]`
   - Parameter: `int? year`
   - Behavior (pick one and keep it consistent in tests):
     - Option A: If `year` is null → `BadRequest()`
     - Option B: If `year` is null → return all planes
   - Else: return `Ok(filteredPlanes)`

3. Keep it small and readable.

## Tips while typing
- Start with:
  - `[HttpGet("search")]`
  - `public ActionResult<List<Plane>> SearchByYear(int? year)`
- If Copilot goes off-track, steer it with an in-code comment:
  - `// Return 400 if year is missing; otherwise filter by Plane.Year`
- Accept suggestions with `Tab`, dismiss with `Esc`

## Acceptance checklist
- Endpoint compiles
- Uses existing in-memory `Planes` list
- Returns the correct status codes

## Optional stretch
Add `GET /planes/search?name=Flyer` (contains match on `Name`) and combine filters.
